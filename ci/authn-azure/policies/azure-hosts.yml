# Hosts that will authenticate with the Azure authenticator
- !policy
  id: azure-apps
  body:
    - !group

    - &hosts
      - !host
        id: system-assigned-identity-app
        annotations:
          authn-azure/subscription-id: <subscription_id>
          authn-azure/resource-group: <resource_group>
          authn-azure/system-assigned-identity: <oid>

      - !host
        id: user-assigned-identity-app
        annotations:
          authn-azure/subscription-id: <subscription_id>
          authn-azure/resource-group: <resource_group>
          authn-azure/user-assigned-identity: <user-assigned-identity>

    - !grant
      role: !group
      members: *hosts

- !grant
  role: !group conjur/authn-azure/test/apps
  member: !group azure-apps
