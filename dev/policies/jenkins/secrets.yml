- !policy
  id: jenkins-secrets
  body:
    - &variables
      - !variable
        id: secret-1
        annotations:
          jenkins_credential_username: system
          jenkins_credential_type: manager

      - !variable
        id: secret-2
        annotations:
          jenkins_credential_username: system
          jenkins_credential_type: manager


    - !group admins
    - !group consumers

    - !permit
      resource: *variables
      privileges: [ read, execute ]
      role: !group consumers

    - !permit
      resource: *variables
      privileges: [ update ]
      role: !group admins

    # secrets-managers has role secrets-users
    - !grant
      member: !group admins
      role: !group consumers

- !grant
  role: !group jenkins-secrets/consumers
  member: !group jenkins/projects
